import{P as p}from"./BYoDscgR.js";function m(){const n="app_settings",r=new p("flashcards");async function a(){try{const e=await r.get(n);if(!e.openaiApiKey||!e.customPrompt||!e.responseLanguage)throw new Error("การตั้งค่าไม่ถูกต้อง");return{openaiApiKey:e.openaiApiKey,customPrompt:e.customPrompt,responseLanguage:e.responseLanguage}}catch(e){throw console.error("Error loading settings:",e),new Error("ไม่พบการตั้งค่า API Key")}}async function s(e){try{const o=await a();if(!o.openaiApiKey)throw new Error("กรุณาตั้งค่า OpenAI API Key ก่อนใช้งาน");const i=o.customPrompt.replace("{word}",e),t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.openaiApiKey}`},body:JSON.stringify({model:"gpt-4.1-nano",messages:[{role:"system",content:`You are a helpful assistant that provides word meanings and examples. Please respond in ${o.responseLanguage==="th"?"Thai":"English"} language.`},{role:"user",content:i}],temperature:.7})});if(!t.ok)throw new Error("เกิดข้อผิดพลาดในการเรียกใช้ API");return(await t.json()).choices[0].message.content.trim()}catch(o){throw console.error("Error getting meaning:",o),new Error(o.message||"เกิดข้อผิดพลาดในการขอความหมายจาก AI")}}return{getMeaning:s}}export{m as u};
