import{f as j,r as m,g as B,h as w,c as g,a as s,b as a,d as i,t as x,u as l,n as D,p as I,w as p,m as P,e as V,o as h,j as A}from"./TdmUD8UC.js";import{P as M}from"./BYoDscgR.js";import{u as S}from"./BZAonURa.js";const z={class:"hero min-h-[80vh] bg-base-200 rounded-lg"},E={class:"hero-content text-center"},L={class:"max-w-md"},R={class:"text-5xl font-bold"},W={class:"w-full stats shadow mb-6"},F={class:"stat"},H={class:"stat-value"},T={class:"stat"},$={class:"stat-value"},q={class:"stat"},G={class:"stat-value"},J={class:"w-full flex flex-col md:flex-row md:flex-wrap gap-4 justify-center text-xl"},K={class:"w-full flex flex-wrap gap-4 justify-center text-xl mt-14"},Y=j({__name:"index",setup(O){S({link:[{rel:"manifest",href:"/flashcard/manifest.json"}]});const y=new M("flashcards"),b=m(0),f=m(0),_=m(0),c=m(0),k=B(()=>c.value>=80?"text-success":c.value>=60?"text-warning":"text-error");async function C(){const t=(await y.allDocs({include_docs:!0})).rows.filter(e=>{var r;return(r=e.doc)==null?void 0:r.word}).map(e=>e.doc);b.value=t.length,f.value=t.reduce((e,r)=>{var u;return e+(((u=r.stats)==null?void 0:u.correct)||0)},0),_.value=t.reduce((e,r)=>{var u;return e+(((u=r.stats)==null?void 0:u.incorrect)||0)},0);const o=f.value+_.value;c.value=o>0?Math.round(f.value/o*1e4)/100:0}w(()=>{C()});const v=m(!1);let d=null;w(()=>{window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),d=n,v.value=!0})});async function N(){if(!d)return;d.prompt();const n=await d.userChoice;console.log("Install prompt outcome:",n.outcome),d=null,v.value=!1}return(n,t)=>{const o=A,e=V;return h(),g("div",z,[s("div",E,[s("div",L,[s("h1",R,[a(o,{name:"icon-park-outline:flash-payment"}),t[0]||(t[0]=i(" My Flash Card "))]),s("div",W,[s("div",F,[t[1]||(t[1]=s("div",{class:"stat-title"},"คำศัพท์ทั้งหมด",-1)),s("div",H,x(l(b)),1)]),s("div",T,[t[2]||(t[2]=s("div",{class:"stat-title"},"ถูกทั้งหมด",-1)),s("div",$,x(l(f)),1)]),s("div",q,[t[3]||(t[3]=s("div",{class:"stat-title"},"ผิดทั้งหมด",-1)),s("div",G,x(l(_)),1)])]),t[9]||(t[9]=s("div",{class:"w-full text-center text-white"},"อัตราความสำเร็จ",-1)),s("div",{class:I(["mt-2 mb-8 radial-progress",l(k)]),style:D({"--value":l(c)}),"aria-valuenow":"70",role:"progressbar"},x(l(c))+"%",7),s("div",J,[a(e,{to:"/practice",class:"btn btn-secondary btn-outline text-xl"},{default:p(()=>[a(o,{name:"material-symbols:play-circle",class:"text-2xl"}),t[4]||(t[4]=i("เริ่มทายคำ "))]),_:1,__:[4]}),a(e,{to:"/cards",class:"btn btn-info btn-outline text-xl"},{default:p(()=>[a(o,{name:"icon-park-outline:setting-config",class:"text-2xl"}),t[5]||(t[5]=i("คำศัพท์ "))]),_:1,__:[5]}),a(e,{to:"/stat",class:"btn btn-accent btn-outline text-xl"},{default:p(()=>[a(o,{name:"material-symbols:bar-chart-4-bars",class:"text-2xl"}),t[6]||(t[6]=i(" สถิติ "))]),_:1,__:[6]}),a(e,{to:"/settings",class:"btn btn-outline text-xl"},{default:p(()=>[a(o,{name:"material-symbols:settings-heart-outline",class:"text-2xl"}),t[7]||(t[7]=i("ตั้งค่า "))]),_:1,__:[7]})]),s("div",K,[l(v)?(h(),g("button",{key:0,onClick:N,class:"px-4 py-2 bg-blue-500 text-white rounded"},[a(o,{name:"material-symbols:download",class:"w-6 h-6 inline-block"}),t[8]||(t[8]=i(" Install App "))])):P("",!0)])])])])}}});export{Y as default};
